(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5106],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},3596:(e,t,s)=>{"use strict";s.d(t,{NR:()=>a,Tp:()=>o,_5:()=>l,c4:()=>n});let r="livreo_auth_token";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";if("session"===t){window.sessionStorage.setItem(r,e),window.localStorage.removeItem(r);return}window.localStorage.setItem(r,e),window.sessionStorage.removeItem(r)}function n(){let e=window.sessionStorage.getItem(r);return e||window.localStorage.getItem(r)}function o(){window.localStorage.removeItem(r),window.sessionStorage.removeItem(r)}function l(){let e=n();if(!e)return null;let t=e.split(".");if(3!==t.length||!t[1])return null;try{let e=JSON.parse(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),s=t+"=".repeat((4-t.length%4)%4);return window.atob(s)}(t[1]));if(e.exp<=Math.floor(Date.now()/1e3))return null;return e}catch(e){return null}}},4219:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2619),n=s.n(a),o=s(63),l=s(2115),i=s(3596),d=s(4835);function c(){let e=(0,o.useSearchParams)(),[t,s]=(0,l.useState)(""),[a,c]=(0,l.useState)(""),[m,u]=(0,l.useState)(!1),[p,x]=(0,l.useState)(null),[h,b]=(0,l.useState)({}),f=(0,d.o)(e.get("next"),"/"),g=e.get("from"),w="/inscription?next=".concat(encodeURIComponent(f)).concat(g?"&from=".concat(encodeURIComponent(g)):"");async function v(e){e.preventDefault(),x(null),b({});let s={};if(/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(t)||(s.email="Veuillez saisir une adresse email valide"),(!a||a.length<8)&&(s.password="Le mot de passe doit contenir au moins 8 caract\xe8res"),Object.keys(s).length>0)return void b(s);u(!0);try{var r;let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})}),s=await e.json();if(!e.ok||!(null==(r=s.data)?void 0:r.token))return void x("Email ou mot de passe incorrect");(0,i.NR)(s.data.token,"admin"===s.data.user.role?"session":"local"),window.location.replace("admin"===s.data.user.role?"/admin":f);return}catch(e){x("Une erreur r\xe9seau est survenue")}finally{u(!1)}}return(0,r.jsx)("main",{className:"flex min-h-screen items-center justify-center bg-background-light px-4 py-10 sm:px-6 sm:py-12",children:(0,r.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-[#e5e5e0] bg-white p-6 shadow-sm sm:p-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 justify-center",children:[(0,r.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full bg-black text-primary",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-xl",children:"menu_book"})}),(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-base font-extrabold uppercase leading-tight tracking-tight text-[#181810] sm:text-lg",children:"SENAME EDITIONâ€™S"})})]}),(0,r.jsx)("br",{}),(0,r.jsx)("h2",{className:"text-[clamp(1.6rem,2.6vw,2.2rem)] font-black text-[#181810]",children:"Connexion"}),(0,r.jsx)("p",{className:"mt-2 text-[clamp(0.9rem,1.2vw,1rem)] text-[#6b6959]",children:"Acc\xe9dez \xe0 votre compte client."})]}),(0,r.jsxs)("form",{className:"space-y-4",onSubmit:v,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-semibold",htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{id:"email",type:"email",required:!0,className:"w-full rounded-lg border bg-white px-4 py-3 outline-none transition focus:border-primary ".concat(h.email?"border-red-400":"border-[#d8d7d0]"),placeholder:"vous@example.com",value:t,onChange:e=>s(e.target.value)}),h.email&&(0,r.jsx)("p",{className:"mt-1 text-xs text-red-600",children:h.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-semibold",htmlFor:"password",children:"Mot de passe"}),(0,r.jsx)("input",{id:"password",type:"password",required:!0,className:"w-full rounded-lg border bg-white px-4 py-3 outline-none transition focus:border-primary ".concat(h.password?"border-red-400":"border-[#d8d7d0]"),placeholder:"Votre mot de passe",value:a,onChange:e=>c(e.target.value)}),h.password&&(0,r.jsx)("p",{className:"mt-1 text-xs text-red-600",children:h.password})]}),p?(0,r.jsx)("p",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:p}):null,(0,r.jsx)("button",{type:"submit",disabled:m,className:"w-full rounded-lg bg-primary px-4 py-3 text-xs font-black uppercase tracking-wider text-black transition hover:brightness-95 disabled:cursor-not-allowed disabled:opacity-60 sm:text-sm",children:m?"Connexion...":"Se connecter"})]}),(0,r.jsx)(n(),{href:"/mot-de-passe-oublie",className:"mt-4 inline-block text-sm font-semibold text-[#181810] underline decoration-primary",children:"Mot de passe oubli\xe9 ?"}),(0,r.jsxs)("p",{className:"mt-6 text-sm text-[#6b6959]",children:["Pas de compte ?"," ",(0,r.jsx)(n(),{className:"font-bold text-[#181810] underline decoration-primary",href:w,children:"Cr\xe9er un compte"})]})]})})}},4835:(e,t,s)=>{"use strict";function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return!e||!e.startsWith("/")||e.startsWith("//")?t:e}s.d(t,{o:()=>r})},6436:(e,t,s)=>{Promise.resolve().then(s.bind(s,4219))}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=6436)),_N_E=e.O()}]);