(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[100],{63:(e,t,n)=>{"use strict";var r=n(7260);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},3596:(e,t,n)=>{"use strict";n.d(t,{NR:()=>s,Tp:()=>l,_5:()=>o,c4:()=>a});let r="livreo_auth_token";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";if("session"===t){window.sessionStorage.setItem(r,e),window.localStorage.removeItem(r);return}window.localStorage.setItem(r,e),window.sessionStorage.removeItem(r)}function a(){let e=window.sessionStorage.getItem(r);return e||window.localStorage.getItem(r)}function l(){window.localStorage.removeItem(r),window.sessionStorage.removeItem(r)}function o(){let e=a();if(!e)return null;let t=e.split(".");if(3!==t.length||!t[1])return null;try{let e=JSON.parse(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),n=t+"=".repeat((4-t.length%4)%4);return window.atob(n)}(t[1]));if(e.exp<=Math.floor(Date.now()/1e3))return null;return e}catch(e){return null}}},4138:(e,t,n)=>{Promise.resolve().then(n.bind(n,9937))},4835:(e,t,n)=>{"use strict";function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return!e||!e.startsWith("/")||e.startsWith("//")?t:e}n.d(t,{o:()=>r})},6159:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(2115),s=n(63),a=n(3596),l=n(4835);function o(){let e=(0,s.usePathname)(),t=(0,s.useSearchParams)(),[n,o]=(0,r.useState)(!1),i=t.toString();return(0,r.useEffect)(()=>{if((0,a._5)())return void o(!0);o(!1);let t=null!=e?e:"/",n=(0,l.o)("".concat(t).concat(i?"?".concat(i):""),t);window.location.replace("/connexion?next=".concat(encodeURIComponent(n)))},[n,e,i]),n}},9678:(e,t,n)=>{"use strict";n.d(t,{v:()=>s});var r=n(3596);async function s(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,r.c4)(),a=new Headers(null!=(t=n.headers)?t:{});return s&&a.set("Authorization","Bearer ".concat(s)),fetch(e,{...n,headers:a})}},9937:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(5155),s=n(2619),a=n.n(s),l=n(2115),o=n(3596),i=n(9678),c=n(6159);let u={pending:"En attente",paid:"Pay\xe9e",refunded:"Rembours\xe9e"};function d(){let e=(0,c.N)(),[t,n]=(0,l.useState)(!0),[s,d]=(0,l.useState)(null),[m,p]=(0,l.useState)([]);return((0,l.useEffect)(()=>{!async function(){n(!0),d(null);try{var e,t;let n=await (0,i.v)("/api/me/contributions"),r=await n.json();if(!n.ok){401===n.status&&(0,o.Tp)(),d(null!=(e=r.error)?e:"Impossible de charger les contributions");return}p(null!=(t=r.data)?t:[])}catch(e){d("Erreur r\xe9seau")}finally{n(!1)}}()},[]),e)?(0,r.jsxs)("main",{className:"mx-auto min-h-screen w-full max-w-5xl px-4 py-10 sm:px-6 sm:py-12",children:[(0,r.jsxs)("div",{className:"mb-6 flex flex-wrap items-center justify-between gap-2 sm:mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-black sm:text-3xl",children:"Mes contributions"}),(0,r.jsx)(a(),{href:"/mon-compte",className:"text-sm font-semibold uppercase tracking-wider hover:text-primary",children:"Retour compte"})]}),t?(0,r.jsx)("p",{className:"text-sm text-[#6b6959]",children:"Chargement..."}):null,s?(0,r.jsx)("p",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:s}):null,t||s||0!==m.length?null:(0,r.jsx)("div",{className:"rounded-xl border border-[#e5e5e0] bg-white p-6",children:"Aucune contribution pour le moment."}),(0,r.jsx)("div",{className:"space-y-4",children:m.map(e=>{var t,n;return(0,r.jsxs)("article",{className:"rounded-xl border border-[#e5e5e0] bg-white p-5",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between gap-3 border-b border-[#ece9dc] pb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-xs font-bold uppercase tracking-[0.2em] text-[#8d895e]",children:["Contribution #",e.id.slice(-6)]}),(0,r.jsx)("p",{className:"mt-1 text-lg font-bold",children:null!=(n=null==(t=e.book)?void 0:t.title)?n:"Campagne"})]}),(0,r.jsx)("span",{className:"rounded-full bg-primary/30 px-3 py-1 text-xs font-bold uppercase",children:u[e.status]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsxs)("p",{className:"text-sm text-[#6b6959]",children:["R\xe9compense: ",e.reward]}),(0,r.jsxs)("p",{className:"text-xl font-black",children:[e.amount.toFixed(2)," â‚¬"]})]})]},e.id)})})]}):null}}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=4138)),_N_E=e.O()}]);