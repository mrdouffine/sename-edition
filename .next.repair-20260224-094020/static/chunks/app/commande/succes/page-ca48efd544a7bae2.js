(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9014],{63:(e,t,r)=>{"use strict";var n=r(7260);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},3019:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(5155),o=r(2619),a=r.n(o),s=r(2115),c=r(63),i=r(9678),l=r(5668);function u(){let e=(0,c.useRouter)(),t=(0,c.useSearchParams)(),[r,o]=(0,s.useState)("Votre commande est cr\xe9\xe9e avec succ\xe8s et reste en attente de paiement.");return(0,s.useEffect)(()=>{!async function(){let r=t.get("session_id"),n=t.get("orderId"),o=t.get("provider"),a=t.get("paid"),s="/mon-compte?section=orders";if("paypal"===o&&"1"===a){(0,l.yA)(),e.replace(s);return}if(!n)return;if(!r)return e.replace("/commande/annulee?provider=stripe&orderId=".concat(encodeURIComponent(n)));let c=await (0,i.v)("/api/payments/stripe/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:n,sessionId:r})}),u=await c.json();if(!c.ok){var d,m;let t=(null!=(d=u.error)?d:"").toLowerCase();if(t.includes("not complete")||t.includes("not completed"))return e.replace("/commande/annulee?provider=stripe&orderId=".concat(encodeURIComponent(n)));let r=encodeURIComponent(null!=(m=u.error)?m:"\xc9chec de validation Stripe.");return e.replace("/commande/echec?reason=".concat(r))}(0,l.yA)(),e.replace(s)}()},[e,t]),(0,n.jsxs)("main",{className:"mx-auto flex min-h-screen w-full max-w-3xl flex-col items-center justify-center px-4 py-10 text-center sm:px-6 sm:py-12",children:[(0,n.jsx)("p",{className:"mb-3 text-xs font-bold uppercase tracking-[0.2em] text-[#8d895e]",children:"SENAME EDITIONâ€™S"}),(0,n.jsx)("h1",{className:"text-2xl font-black text-[#181810] sm:text-4xl",children:"Commande enregistr\xe9e"}),(0,n.jsx)("p",{className:"mt-3 text-sm text-[#6b6959] sm:text-base",children:r}),(0,n.jsxs)("div",{className:"mt-8 flex flex-wrap items-center justify-center gap-3",children:[(0,n.jsx)(a(),{href:"/mes-achats",className:"rounded-lg bg-primary px-5 py-3 text-sm font-bold uppercase",children:"Voir mes achats"}),(0,n.jsx)(a(),{href:"/",className:"rounded-lg border border-[#d8d7d0] px-5 py-3 text-sm font-bold uppercase",children:"Retour boutique"})]})]})}},3596:(e,t,r)=>{"use strict";r.d(t,{NR:()=>o,Tp:()=>s,_5:()=>c,c4:()=>a});let n="livreo_auth_token";function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";if("session"===t){window.sessionStorage.setItem(n,e),window.localStorage.removeItem(n);return}window.localStorage.setItem(n,e),window.sessionStorage.removeItem(n)}function a(){let e=window.sessionStorage.getItem(n);return e||window.localStorage.getItem(n)}function s(){window.localStorage.removeItem(n),window.sessionStorage.removeItem(n)}function c(){let e=a();if(!e)return null;let t=e.split(".");if(3!==t.length||!t[1])return null;try{let e=JSON.parse(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=t+"=".repeat((4-t.length%4)%4);return window.atob(r)}(t[1]));if(e.exp<=Math.floor(Date.now()/1e3))return null;return e}catch(e){return null}}},5668:(e,t,r)=>{"use strict";r.d(t,{AR:()=>c,SM:()=>i,bE:()=>s,cr:()=>u,hs:()=>d,je:()=>o,yA:()=>l});let n="livreo_cart";function o(){try{let e=window.localStorage.getItem(n);if(!e)return[];let t=JSON.parse(e);if(!Array.isArray(t))return[];return t}catch(e){return[]}}function a(e){window.localStorage.setItem(n,JSON.stringify(e))}function s(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=o();return a(t=n.find(t=>t.bookId===e.bookId)?n.map(t=>t.bookId===e.bookId?{...t,quantity:Math.max(1,t.quantity+r)}:t):[...n,{...e,quantity:Math.max(1,r)}]),t}function c(e,t){let r=Math.max(1,t),n=o().map(t=>t.bookId===e?{...t,quantity:r}:t);return a(n),n}function i(e){let t=o().filter(t=>t.bookId!==e);return a(t),t}function l(){a([])}function u(e){return e.reduce((e,t)=>e+t.quantity,0)}function d(e){return e.reduce((e,t)=>e+t.price*t.quantity,0)}},6750:(e,t,r)=>{Promise.resolve().then(r.bind(r,3019))},9678:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var n=r(3596);async function o(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,n.c4)(),a=new Headers(null!=(t=r.headers)?t:{});return o&&a.set("Authorization","Bearer ".concat(o)),fetch(e,{...r,headers:a})}}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=6750)),_N_E=e.O()}]);