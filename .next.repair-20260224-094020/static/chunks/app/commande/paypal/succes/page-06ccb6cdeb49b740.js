(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7774],{63:(e,t,n)=>{"use strict";var r=n(7260);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},2688:(e,t,n)=>{Promise.resolve().then(n.bind(n,7913))},3596:(e,t,n)=>{"use strict";n.d(t,{NR:()=>a,Tp:()=>c,_5:()=>l,c4:()=>o});let r="livreo_auth_token";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";if("session"===t){window.sessionStorage.setItem(r,e),window.localStorage.removeItem(r);return}window.localStorage.setItem(r,e),window.sessionStorage.removeItem(r)}function o(){let e=window.sessionStorage.getItem(r);return e||window.localStorage.getItem(r)}function c(){window.localStorage.removeItem(r),window.sessionStorage.removeItem(r)}function l(){let e=o();if(!e)return null;let t=e.split(".");if(3!==t.length||!t[1])return null;try{let e=JSON.parse(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),n=t+"=".repeat((4-t.length%4)%4);return window.atob(n)}(t[1]));if(e.exp<=Math.floor(Date.now()/1e3))return null;return e}catch(e){return null}}},5668:(e,t,n)=>{"use strict";n.d(t,{AR:()=>l,SM:()=>i,bE:()=>c,cr:()=>u,hs:()=>d,je:()=>a,yA:()=>s});let r="livreo_cart";function a(){try{let e=window.localStorage.getItem(r);if(!e)return[];let t=JSON.parse(e);if(!Array.isArray(t))return[];return t}catch(e){return[]}}function o(e){window.localStorage.setItem(r,JSON.stringify(e))}function c(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=a();return o(t=r.find(t=>t.bookId===e.bookId)?r.map(t=>t.bookId===e.bookId?{...t,quantity:Math.max(1,t.quantity+n)}:t):[...r,{...e,quantity:Math.max(1,n)}]),t}function l(e,t){let n=Math.max(1,t),r=a().map(t=>t.bookId===e?{...t,quantity:n}:t);return o(r),r}function i(e){let t=a().filter(t=>t.bookId!==e);return o(t),t}function s(){o([])}function u(e){return e.reduce((e,t)=>e+t.quantity,0)}function d(e){return e.reduce((e,t)=>e+t.price*t.quantity,0)}},7913:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(5155),a=n(2115),o=n(63),c=n(9678),l=n(5668);function i(){let e=(0,o.useRouter)(),t=(0,o.useSearchParams)();return(0,a.useEffect)(()=>{!async function(){let n=t.get("orderId"),r=t.get("token");if(!n||!r){let t=encodeURIComponent("Param\xe8tres PayPal manquants.");e.replace("/commande/echec?reason=".concat(t));return}let a=await (0,c.v)("/api/payments/paypal/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:n,paypalOrderId:r})}),o=await a.json();if(!a.ok){var i,s;let t=(null!=(i=o.error)?i:"").toLowerCase();if(t.includes("not complete")||t.includes("not completed"))return e.replace("/commande/annulee?provider=paypal&orderId=".concat(encodeURIComponent(n)));let r=encodeURIComponent(null!=(s=o.error)?s:"\xc9chec de validation PayPal.");return e.replace("/commande/echec?reason=".concat(r))}(0,l.yA)(),e.replace("/commande/succes?provider=paypal&paid=1")}()},[e,t]),(0,r.jsxs)("main",{className:"mx-auto flex min-h-screen w-full max-w-3xl flex-col items-center justify-center px-4 py-10 text-center sm:px-6 sm:py-12",children:[(0,r.jsx)("p",{className:"mb-3 text-xs font-bold uppercase tracking-[0.2em] text-[#8d895e]",children:"SENAME EDITIONâ€™S"}),(0,r.jsx)("h1",{className:"text-2xl font-black text-[#181810] sm:text-4xl",children:"Validation PayPal..."}),(0,r.jsx)("p",{className:"mt-3 text-sm text-[#6b6959] sm:text-base",children:"Merci de patienter pendant la confirmation du paiement."})]})}},9678:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});var r=n(3596);async function a(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,r.c4)(),o=new Headers(null!=(t=n.headers)?t:{});return a&&o.set("Authorization","Bearer ".concat(a)),fetch(e,{...n,headers:o})}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=2688)),_N_E=e.O()}]);