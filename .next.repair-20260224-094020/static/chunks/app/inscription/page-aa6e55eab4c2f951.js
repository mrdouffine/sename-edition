(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4819],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},2830:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(2619),n=r.n(a),o=r(63),l=r(2115),i=r(3596),d=r(4835);function c(){let e=(0,o.useSearchParams)(),[t,r]=(0,l.useState)(""),[a,c]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[p,x]=(0,l.useState)(""),[h,b]=(0,l.useState)(!1),[f,g]=(0,l.useState)(null),[w,v]=(0,l.useState)({}),j=(0,d.o)(e.get("next"),"/"),N=e.get("from"),y="/connexion?next=".concat(encodeURIComponent(j)).concat(N?"&from=".concat(encodeURIComponent(N)):"");async function S(e){e.preventDefault(),g(null),v({});let r={};if((!t.trim()||t.trim().length<2)&&(r.name="Veuillez saisir un nom valide (au moins 2 caract\xe8res)"),/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(a)||(r.email="Veuillez saisir une adresse email valide"),m.length<8&&(r.password="Le mot de passe doit contenir au moins 8 caract\xe8res"),m!==p&&(r.confirmPassword="Les mots de passe ne correspondent pas"),Object.keys(r).length>0)return void v(r);b(!0);try{var s,n;let e=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:a,password:m})}),r=await e.json();if(!e.ok||!(null==(s=r.data)?void 0:s.token))return void g(null!=(n=r.error)?n:"Inscription impossible");(0,i.NR)(r.data.token,"admin"===r.data.user.role?"session":"local"),window.location.replace("admin"===r.data.user.role?"/admin":j);return}catch(e){g("Une erreur r\xe9seau est survenue")}finally{b(!1)}}return(0,s.jsx)("main",{className:"flex min-h-screen items-center justify-center bg-background-light px-4 py-10 sm:px-6 sm:py-12",children:(0,s.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-[#e5e5e0] bg-white p-6 shadow-sm sm:p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 justify-center",children:[(0,s.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full bg-black text-primary",children:(0,s.jsx)("span",{className:"material-symbols-outlined text-xl",children:"menu_book"})}),(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"text-base font-extrabold uppercase leading-tight tracking-tight text-[#181810] sm:text-lg",children:"SENAME EDITIONâ€™S"})})]}),(0,s.jsx)("br",{}),(0,s.jsx)("h2",{className:"text-[clamp(1.6rem,2.6vw,2.2rem)] font-black text-[#181810]",children:"Inscription"}),(0,s.jsx)("p",{className:"mt-2 text-[clamp(0.9rem,1.2vw,1rem)] text-[#6b6959]",children:"Cr\xe9ez votre compte lecteur."})]}),(0,s.jsxs)("form",{className:"space-y-4",onSubmit:S,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-semibold",htmlFor:"name",children:"Nom complet"}),(0,s.jsx)("input",{id:"name",type:"text",required:!0,className:"w-full rounded-lg border bg-white px-4 py-3 outline-none transition focus:border-primary ".concat(w.name?"border-red-400":"border-[#d8d7d0]"),placeholder:"Votre nom",value:t,onChange:e=>r(e.target.value)}),w.name&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-600",children:w.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-semibold",htmlFor:"email",children:"Email"}),(0,s.jsx)("input",{id:"email",type:"email",required:!0,className:"w-full rounded-lg border bg-white px-4 py-3 outline-none transition focus:border-primary ".concat(w.email?"border-red-400":"border-[#d8d7d0]"),placeholder:"vous@example.com",value:a,onChange:e=>c(e.target.value)}),w.email&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-600",children:w.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-semibold",htmlFor:"password",children:"Mot de passe"}),(0,s.jsx)("input",{id:"password",type:"password",required:!0,minLength:8,className:"w-full rounded-lg border bg-white px-4 py-3 outline-none transition focus:border-primary ".concat(w.password?"border-red-400":"border-[#d8d7d0]"),placeholder:"Minimum 8 caract\xe8res",value:m,onChange:e=>u(e.target.value)}),w.password&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-600",children:w.password})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-semibold",htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),(0,s.jsx)("input",{id:"confirmPassword",type:"password",required:!0,minLength:8,className:"w-full rounded-lg border bg-white px-4 py-3 outline-none transition focus:border-primary ".concat(w.confirmPassword?"border-red-400":"border-[#d8d7d0]"),placeholder:"Retapez votre mot de passe",value:p,onChange:e=>x(e.target.value)}),w.confirmPassword&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-600",children:w.confirmPassword})]}),f?(0,s.jsx)("p",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:f}):null,(0,s.jsx)("button",{type:"submit",disabled:h,className:"w-full rounded-lg bg-primary px-4 py-3 text-xs font-black uppercase tracking-wider text-black transition hover:brightness-95 disabled:cursor-not-allowed disabled:opacity-60 sm:text-sm",children:h?"Inscription...":"Cr\xe9er mon compte"})]}),(0,s.jsxs)("p",{className:"mt-6 text-sm text-[#6b6959]",children:["D\xe9j\xe0 inscrit ?"," ",(0,s.jsx)(n(),{className:"font-bold text-[#181810] underline decoration-primary",href:y,children:"Se connecter"})]})]})})}},3596:(e,t,r)=>{"use strict";r.d(t,{NR:()=>a,Tp:()=>o,_5:()=>l,c4:()=>n});let s="livreo_auth_token";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";if("session"===t){window.sessionStorage.setItem(s,e),window.localStorage.removeItem(s);return}window.localStorage.setItem(s,e),window.sessionStorage.removeItem(s)}function n(){let e=window.sessionStorage.getItem(s);return e||window.localStorage.getItem(s)}function o(){window.localStorage.removeItem(s),window.sessionStorage.removeItem(s)}function l(){let e=n();if(!e)return null;let t=e.split(".");if(3!==t.length||!t[1])return null;try{let e=JSON.parse(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=t+"=".repeat((4-t.length%4)%4);return window.atob(r)}(t[1]));if(e.exp<=Math.floor(Date.now()/1e3))return null;return e}catch(e){return null}}},4835:(e,t,r)=>{"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return!e||!e.startsWith("/")||e.startsWith("//")?t:e}r.d(t,{o:()=>s})},8883:(e,t,r)=>{Promise.resolve().then(r.bind(r,2830))}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=8883)),_N_E=e.O()}]);